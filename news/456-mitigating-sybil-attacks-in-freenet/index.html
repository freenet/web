<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Mitigating Sybil attacks in Freenet | Freenet</title>
<link rel=icon href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>F</text></svg>"><link rel=stylesheet href=/fontawesome/css/fontawesome.min.css><link rel=stylesheet href=/fontawesome/css/solid.min.css><link rel=stylesheet href=/fontawesome/css/brands.min.css><link rel=stylesheet href=/bulma.min.css><link rel=stylesheet href=/css/freenet.min.4dde39b1dcee8c61e54e1fd4abe73dba549418977747950975264a0d17389002.css><script src=https://freenet.org/js/main.js></script><script src=/js/nacl.min.js></script><script src=/js/nacl-util.min.js></script><script src=/js/cbor.min.js></script><script>window.ghostkeyApiUrl="https://gkapi.freenet.org",window.stripePublishableKey="pk_live_51PUf6RCCPv9UL23Gw8QzBFY3LxQMWmw2qp9k2MOyJQpaAPF5jpomsZ5K81JDvG8BW05PSqm2LjjGqfaepzHNWk8y007raWcjJX"</script></head><body><div class=container><header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class="navbar-item logo-container" href=/><img src=/freenet_logo.svg alt="Freenet Logo" class=logo-img id=freenet-logo>
<span class=logo-text>Freenet</span>
</a><a role=button class=navbar-burger aria-label=menu aria-expanded=false data-target=freenetNavbar><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=freenetNavbar class=navbar-menu><div class=navbar-start><div class="navbar-item has-dropdown"><a class=navbar-link>Developers</a><div class=navbar-dropdown><a class=navbar-item href=/dev/core/>Core</a>
<a class=navbar-item href=/dev/apps/>Apps</a></div></div><div class="navbar-item has-dropdown"><a class=navbar-link>Resources</a><div class=navbar-dropdown><a class=navbar-item href=/news/>News</a>
<a class=navbar-item href=/resources/video-talks/>Video Talks</a>
<a class=navbar-item href=/faq/>FAQ</a></div></div><a class=navbar-item href=/donate/>Donate</a></div><div class=navbar-end></div></div></nav><script>document.addEventListener("DOMContentLoaded",e=>{const t=document.querySelectorAll(".navbar-item.has-dropdown");t.forEach(e=>{const n=e.querySelector(".navbar-link");n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),t.forEach(t=>{t!==e&&t.classList.remove("is-active")}),e.classList.toggle("is-active")})}),document.addEventListener("click",e=>{e.target.closest(".navbar-item.has-dropdown")||t.forEach(e=>e.classList.remove("is-active"))})})</script></header><main><div class="section content"><section class=section><div class=container><h1 class=title>Mitigating Sybil attacks in Freenet</h1><p class=date>June 26, 2022</p><div class=content><p>Every node in the Locutus network has a <em>location</em>, a floating-point value between 0.0 and 1.0 representing its position
in the small-world network. These are arranged in a ring so positions 0.0 and 1.0 are the same. Each contract also has a
location that is deterministically derived from the contract&rsquo;s code and parameters through a hash function.</p><p>The network&rsquo;s goal is to ensure that nodes close together are much more likely to be connected than distant nodes,
specifically, the probability of two nodes being connected
<a href=https://en.wikipedia.org/wiki/Small-world_routing>should be</a> proportional to <code>1/distance</code>.</p><p>A <a href=https://en.wikipedia.org/wiki/Sybil_attack>Sybil attack</a> is where an attacker creates a large number of identities
in a system and uses it to gain a disproportionately large influence which they then use for nefarious purposes.</p><p>In Locutus, such an attack might involve trying to control all or most peers close to a specific location. This could
then be used to drop or ignore get requests or updates for contract states close to that location.</p><h1 id=solutions>Solutions</h1><ol><li><a href=#identity-creation-cost>Increase the cost of creating a large number of nodes close to a specific chosen identities</a></li><li><a href=#location-hopping>Make it more difficult to target specific contracts</a></li><li><a href=#peer-pressure>Increase the cost of bad behavior by making other nodes in the network monitor for it and react accordingly</a></li><li><a href=https://www.pivotaltracker.com/story/show/186472381>Use statistical anomaly detection to identify and thwart suspicious behavior</a></li></ol><h2 id=1-identity-creation-cost>1. Identity Creation Cost</h2><h3 id=11-gateway-assignment>1.1 Gateway assignment</h3><p>When a node joins through a gateway it must negotiate its location with the gateway first. This could be done by both
node and gateway generating a random nonce, hashing it, and sending the hash to the other. After exchanging hashes they
exchange their actual nonces which are combined to create a new nonce, and a location is derived from that. This
prevents either gateway or the joiner from choosing the location.</p><h4 id=111-attacks>1.1.1 Attacks</h4><ul><li>Gateway and joiner could collude to choose the location</li></ul><h3 id=12-ip-derived-location>1.2 IP-derived location</h3><ul><li>The location could be derived deterministically from the node&rsquo;s IP address, this could then be verified by any node
that communicates directly with it.</li></ul><h4 id=121-attacks>1.2.1 Attacks</h4><ul><li>Attackers could limit connections to peers they also control, which could then ignore a mismatch between their
location and their IP address.</li></ul><h2 id=2-location-hopping>2. Location Hopping</h2><h3 id=21-replication>2.1 Replication</h3><p>A contract has multiple copies, each indicated by a contract parameter - the location of each copy will be pseudorandom.
A user could query a random subset of the copies to ensure that they receive any updates. If any copy has an old version
of the state then the user can update them by reinserting the latest version obtained from a different copy.</p><h3 id=22-date-hopping>2.2 Date hopping</h3><p>A contract contains a parameter for the current date, which will mean that the contract has a different location every
day. If today&rsquo;s contract is found to be missing it can be reinserted using an older copy.</p></div></div></section></div></main><footer><div class=footer-content style=text-align:center><p>&copy; 2024 Freenet Project Inc. Website source at
<a href=https://github.com/freenet/web><img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png alt=GitHub style=width:20px;height:20px;vertical-align:middle> <span style=color:#000;font-weight:600>freenet/web</span></a>.</footer></div></body></html>