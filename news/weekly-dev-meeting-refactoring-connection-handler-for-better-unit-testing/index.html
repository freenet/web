<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Weekly Dev Meeting - Refactoring Connection Handler for Better Unit Testing | Freenet</title>
<link rel=icon href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>F</text></svg>"><link rel=stylesheet href=/fontawesome/css/fontawesome.min.css><link rel=stylesheet href=/fontawesome/css/solid.min.css><link rel=stylesheet href=/fontawesome/css/brands.min.css><link rel=stylesheet href=/bulma.min.css><link rel=stylesheet href=/css/freenet.min.4dde39b1dcee8c61e54e1fd4abe73dba549418977747950975264a0d17389002.css><script src=https://freenet.org/js/main.js></script><script src=/js/nacl.min.js></script><script src=/js/nacl-util.min.js></script><script src=/js/cbor.min.js></script><script>window.ghostkeyApiUrl="https://gkapi.freenet.org",window.stripePublishableKey="pk_live_51PUf6RCCPv9UL23Gw8QzBFY3LxQMWmw2qp9k2MOyJQpaAPF5jpomsZ5K81JDvG8BW05PSqm2LjjGqfaepzHNWk8y007raWcjJX"</script></head><body><div class=container><header><nav class=navbar role=navigation aria-label="main navigation"><div class=navbar-brand><a class="navbar-item logo-container" href=/><img src=/freenet_logo.svg alt="Freenet Logo" class=logo-img id=freenet-logo>
<span class=logo-text>Freenet</span>
</a><a role=button class=navbar-burger aria-label=menu aria-expanded=false data-target=freenetNavbar><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a></div><div id=freenetNavbar class=navbar-menu><div class=navbar-start><div class="navbar-item has-dropdown"><a class=navbar-link>Developers</a><div class=navbar-dropdown><a class=navbar-item href=/dev/core/>Core</a>
<a class=navbar-item href=/dev/apps/>Apps</a></div></div><div class="navbar-item has-dropdown"><a class=navbar-link>Resources</a><div class=navbar-dropdown><a class=navbar-item href=/news/>News</a>
<a class=navbar-item href=/resources/video-talks/>Video Talks</a>
<a class=navbar-item href=/faq/>FAQ</a></div></div><a class=navbar-item href=/donate/>Donate</a></div><div class=navbar-end></div></div></nav><script>document.addEventListener("DOMContentLoaded",e=>{const t=document.querySelectorAll(".navbar-item.has-dropdown");t.forEach(e=>{const n=e.querySelector(".navbar-link");n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),t.forEach(t=>{t!==e&&t.classList.remove("is-active")}),e.classList.toggle("is-active")})}),document.addEventListener("click",e=>{e.target.closest(".navbar-item.has-dropdown")||t.forEach(e=>e.classList.remove("is-active"))})})</script></header><main><div class="section content"><section class=section><div class=container><h1 class=title>Weekly Dev Meeting - Refactoring Connection Handler for Better Unit Testing</h1><p class=date>July 5, 2024</p><div class=content><p>This week we&rsquo;ve been focussed on a crucial refactoring task to improve how we manage
network connections. The goal is to make it easier to isolate bugs by separating the
connection handling logic from the transport layer so they can be tested independently.</p><p><strong>What&rsquo;s Changing:</strong></p><ol><li><strong>Decoupling Connection Handling:</strong></li></ol><ul><li>We’re separating the connection handling code from the transport layer. This
change allows us to test connection states on their own, without involving
the transport mechanisms.</li><li>With this separation, we can emulate connections and test different states
more accurately, pinpointing problems faster.</li></ul><ol start=2><li><strong>Enhanced Testing and Debugging:</strong></li></ol><ul><li>By isolating the connection handling, Nacho has created a series of unit
tests to cover various connection scenarios, such as establishing,
rejecting, and accepting connections.</li><li>This approach helps us identify areas needing improvement and ensures our
changes lead to a more stable system.</li></ul><ol start=3><li><strong>Clearer Error Handling:</strong></li></ol><ul><li>The refactor also simplifies error handling. By separating concerns, it’s
easier to see if issues come from the connection handling or the transport
layer, making debugging more straightforward.</li></ul><ol start=4><li><strong>Streamlined Codebase:</strong></li></ol><ul><li>We&rsquo;ve removed redundant and tangled code, simplifying the codebase and
reducing potential failure points.</li></ul><h4 id=next-steps>Next Steps:</h4><ol><li><strong>Completing the Refactor:</strong></li></ol><ul><li>Nacho is close to finishing this refactor. The plan is to replace all the
old connection handling code with the new modular implementation.</li><li>This change will make the system easier to maintain and test, setting us up
well for future enhancements.</li></ul><ol start=2><li><strong>Focusing on Transport Layer Issues:</strong></li></ol><ul><li>Once the refactor is done, we&rsquo;ll turn our attention to fixing any remaining
transport layer issues. With the connection handling logic isolated,
identifying and addressing these issues should be more manageable.</li><li>We&rsquo;ll add more unit tests for the transport layer to cover all edge cases
and ensure it works reliably.</li></ul><ol start=3><li><strong>Preparing for the Next Release:</strong></li></ol><ul><li>If the transport layer is stable after the refactor, we’ll move forward with
a release. This update will include the recent improvements and ensure our
core network functionalities are solid.</li></ul><h4 id=conclusion>Conclusion</h4><p>This refactor should be the last step before launching the Freenet network. By
modularizing the connection handling, we can test more thoroughly and fix issues
more quickly, leading to a more stable platform.</p></div></div></section></div></main><footer><div class=footer-content style=text-align:center><p>&copy; 2024 Freenet Project Inc. Website source at
<a href=https://github.com/freenet/web><img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png alt=GitHub style=width:20px;height:20px;vertical-align:middle> <span style=color:#000;font-weight:600>freenet/web</span></a>.</footer></div></body></html>