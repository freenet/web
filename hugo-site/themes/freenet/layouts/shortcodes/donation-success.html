<div id="certificate-info">
  <p>Your donation certificate is being generated. Please wait...</p>
</div>

<div id="certificateSection" style="display: none;">
  <h3>Your Donation Certificate</h3>
  <div>
    <h4>Donation Certificate (can be shared)</h4>
    <textarea id="certificate" rows="4" cols="50" readonly></textarea>
    <button onclick="copyCertificate()" class="button is-small">Copy Certificate</button>
  </div>
  <div>
    <h4>Private Key (keep this secret!)</h4>
    <textarea id="privateKey" rows="4" cols="50" readonly></textarea>
    <button onclick="copyPrivateKey()" class="button is-small">Copy Private Key</button>
  </div>
  <p><strong>Warning:</strong> Keep your private key secret. Only share the certificate.</p>
  <button id="downloadCertificate" class="button is-primary">Download Certificate and Private Key</button>
</div>

<div id="errorMessage" style="display: none; color: red;"></div>

<script src="/js/elliptic.min.js"></script>
<script src="/js/donation-success.js"></script>
<script>
async function copyCertificate() {
  const certificateElement = document.getElementById('certificate');
  try {
    await navigator.clipboard.writeText(certificateElement.value);
    alert('Certificate copied to clipboard!');
  } catch (err) {
    console.error('Failed to copy certificate: ', err);
    alert('Failed to copy certificate. Please try again.');
  }
}

async function copyPrivateKey() {
  const privateKeyElement = document.getElementById('privateKey');
  try {
    await navigator.clipboard.writeText(privateKeyElement.value);
    alert('Private key copied to clipboard. Remember to keep it secret!');
  } catch (err) {
    console.error('Failed to copy private key: ', err);
    alert('Failed to copy private key. Please try again.');
  }
}
</script>
