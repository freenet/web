<svg viewBox="0 0 600 420" xmlns="http://www.w3.org/2000/svg" font-family="system-ui, -apple-system, sans-serif">
  <style>
    :root {
      --ui-bg: #f0e6e0;
      --ui-border: #d8c8c0;
      --delegate-bg: #e8e4f0;
      --delegate-border: #c8c0d8;
      --secret-bg: #ffeedd;
      --secret-border: #e8c8a8;
      --boundary-line: #888888;
      --arrow-color: #666666;
      --text-primary: #3a3a3a;
      --text-secondary: #666666;
      --text-muted: #888888;
      --step-bg: #ffffff;
      --step-border: #cccccc;
      --lock-color: #b08030;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --ui-bg: #483838;
        --ui-border: #604848;
        --delegate-bg: #403848;
        --delegate-border: #584860;
        --secret-bg: #4a4030;
        --secret-border: #685838;
        --boundary-line: #888888;
        --arrow-color: #aaaaaa;
        --text-primary: #e8e8e8;
        --text-secondary: #b0b0b0;
        --text-muted: #808080;
        --step-bg: #2a2a2a;
        --step-border: #505050;
        --lock-color: #d0a050;
      }
    }
    .ui-box { fill: var(--ui-bg); stroke: var(--ui-border); }
    .delegate-box { fill: var(--delegate-bg); stroke: var(--delegate-border); }
    .secret-box { fill: var(--secret-bg); stroke: var(--secret-border); }
    .text-primary { fill: var(--text-primary); }
    .text-secondary { fill: var(--text-secondary); }
    .text-muted { fill: var(--text-muted); }
    .boundary-line { stroke: var(--boundary-line); }
    .arrow { stroke: var(--arrow-color); fill: none; }
    .arrow-head { fill: var(--arrow-color); }
    .step-circle { fill: var(--step-bg); stroke: var(--step-border); }
    .lock-icon { fill: var(--lock-color); }
  </style>

  <!-- UI Component box -->
  <g transform="translate(40, 30)">
    <rect x="0" y="0" width="520" height="120" rx="12" class="ui-box" stroke-width="2"/>
    <text x="20" y="30" font-size="16" font-weight="600" class="text-primary">UI Component</text>

    <!-- Step 1: Request -->
    <g transform="translate(30, 50)">
      <circle cx="0" cy="12" r="12" class="step-circle" stroke-width="1.5"/>
      <text x="0" y="17" font-size="12" font-weight="600" text-anchor="middle" class="text-primary">1</text>
      <text x="20" y="17" font-size="13" class="text-secondary">"Please sign this payload"</text>
    </g>

    <!-- Step 4: Response -->
    <g transform="translate(280, 50)">
      <circle cx="0" cy="12" r="12" class="step-circle" stroke-width="1.5"/>
      <text x="0" y="17" font-size="12" font-weight="600" text-anchor="middle" class="text-primary">4</text>
      <text x="20" y="17" font-size="13" class="text-secondary">Receives signature</text>
    </g>

    <!-- Note about key -->
    <text x="300" y="100" font-size="11" font-style="italic" class="text-muted">(key never exposed)</text>
  </g>

  <!-- Boundary line with label -->
  <line x1="40" y1="195" x2="560" y2="195" stroke-width="2" stroke-dasharray="8 4" class="boundary-line"/>
  <rect x="230" y="183" width="140" height="24" rx="4" fill="var(--step-bg)" stroke="var(--step-border)" stroke-width="1"/>
  <text x="300" y="200" font-size="11" font-weight="500" text-anchor="middle" class="text-secondary">Delegate Boundary</text>

  <!-- Arrows crossing boundary -->
  <!-- Down arrow (request) -->
  <g transform="translate(150, 150)">
    <line x1="0" y1="0" x2="0" y2="90" stroke-width="2" class="arrow"/>
    <polygon points="-6,84 0,96 6,84" class="arrow-head"/>
  </g>

  <!-- Up arrow (response) -->
  <g transform="translate(450, 150)">
    <line x1="0" y1="90" x2="0" y2="0" stroke-width="2" class="arrow"/>
    <polygon points="-6,6 0,-6 6,6" class="arrow-head"/>
  </g>

  <!-- Delegate box -->
  <g transform="translate(40, 240)">
    <rect x="0" y="0" width="520" height="150" rx="12" class="delegate-box" stroke-width="2"/>
    <text x="20" y="30" font-size="16" font-weight="600" class="text-primary">Delegate</text>

    <!-- Step 2 -->
    <g transform="translate(30, 50)">
      <circle cx="0" cy="12" r="12" class="step-circle" stroke-width="1.5"/>
      <text x="0" y="17" font-size="12" font-weight="600" text-anchor="middle" class="text-primary">2</text>
      <text x="20" y="17" font-size="13" class="text-secondary">Check sender, validate request</text>
    </g>

    <!-- Step 3 -->
    <g transform="translate(30, 90)">
      <circle cx="0" cy="12" r="12" class="step-circle" stroke-width="1.5"/>
      <text x="0" y="17" font-size="12" font-weight="600" text-anchor="middle" class="text-primary">3</text>
      <text x="20" y="17" font-size="13" class="text-secondary">Sign using private key</text>
    </g>

    <!-- Secret box with lock -->
    <g transform="translate(340, 55)">
      <rect x="0" y="0" width="150" height="70" rx="8" class="secret-box" stroke-width="2"/>
      <!-- Lock icon -->
      <g transform="translate(20, 20)">
        <rect x="0" y="12" width="24" height="18" rx="3" class="lock-icon"/>
        <path d="M 4 12 L 4 8 A 8 8 0 0 1 20 8 L 20 12" fill="none" stroke="var(--lock-color)" stroke-width="3" stroke-linecap="round"/>
      </g>
      <text x="55" y="38" font-size="13" font-weight="500" class="text-primary">Private Key</text>
      <text x="75" y="56" font-size="10" font-style="italic" class="text-muted">never leaves</text>
    </g>
  </g>
</svg>
