<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 520 380">
  <defs>
    <style>
      .box { fill: #f8fafc; stroke: #3b82f6; stroke-width: 2; rx: 6; }
      .box-final { fill: #dcfce7; stroke: #22c55e; stroke-width: 2; rx: 6; }
      .label { font-family: system-ui, -apple-system, sans-serif; font-size: 14px; fill: #1e293b; text-anchor: middle; }
      .label-peer { font-family: system-ui, -apple-system, sans-serif; font-size: 15px; fill: #3b82f6; text-anchor: middle; font-weight: 600; }
      .label-action { font-family: system-ui, -apple-system, sans-serif; font-size: 12px; fill: #64748b; text-anchor: middle; font-style: italic; }
      .label-sync { font-family: system-ui, -apple-system, sans-serif; font-size: 13px; fill: #475569; text-anchor: middle; font-weight: 500; }
      .arrow { stroke: #64748b; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-sync { stroke: #22c55e; stroke-width: 2; fill: none; stroke-dasharray: 6,3; }
      .line-sync { stroke: #22c55e; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#64748b" />
    </marker>
  </defs>

  <!-- Peer labels -->
  <text class="label-peer" x="130" y="30">Peer A</text>
  <text class="label-peer" x="390" y="30">Peer B</text>

  <!-- Initial state boxes -->
  <rect class="box" x="70" y="45" width="120" height="36" />
  <text class="label" x="130" y="69">State: [ ]</text>

  <rect class="box" x="330" y="45" width="120" height="36" />
  <text class="label" x="390" y="69">State: [ ]</text>

  <!-- Arrows down -->
  <line class="arrow" x1="130" y1="81" x2="130" y2="115" />
  <line class="arrow" x1="390" y1="81" x2="390" y2="115" />

  <!-- Action labels -->
  <text class="label-action" x="130" y="135">Add "Hello"</text>
  <text class="label-action" x="390" y="135">Add "World"</text>

  <!-- Arrows down -->
  <line class="arrow" x1="130" y1="145" x2="130" y2="175" />
  <line class="arrow" x1="390" y1="145" x2="390" y2="175" />

  <!-- Intermediate state boxes -->
  <rect class="box" x="55" y="180" width="150" height="36" />
  <text class="label" x="130" y="204">State: [Hello]</text>

  <rect class="box" x="315" y="180" width="150" height="36" />
  <text class="label" x="390" y="204">State: [World]</text>

  <!-- Sync arrows -->
  <line class="arrow" x1="130" y1="216" x2="130" y2="250" />
  <line class="arrow" x1="390" y1="216" x2="390" y2="250" />

  <!-- Sync visualization -->
  <line class="arrow-sync" x1="175" y1="233" x2="345" y2="233" />
  <text class="label-sync" x="260" y="228">sync</text>

  <!-- Merge indicator lines -->
  <line class="line-sync" x1="130" y1="260" x2="200" y2="290" />
  <line class="line-sync" x1="390" y1="260" x2="320" y2="290" />

  <!-- Final state boxes -->
  <rect class="box-final" x="30" y="300" width="200" height="40" />
  <text class="label" x="130" y="326">State: [Hello, World]</text>

  <rect class="box-final" x="290" y="300" width="200" height="40" />
  <text class="label" x="390" y="326">State: [Hello, World]</text>

  <!-- Equal sign between final states -->
  <text class="label-sync" x="260" y="326">=</text>
</svg>
